---
title: "Business Intelligence Case Challenge"
author: "Franciszek Kornobis, Jędrzej Słupski"
date: "Maj 2024"
output: html_document
---

1. Wstęp
2. Opis metod prognozowania
    1. Analiza regresji
    2. ARIMA
    3. Prophet
    4. STL, TBATS
    5. Ostateczna predykcja
3. Przewidywanie
4. Podsumowanie

### 1. Wstęp

Wyzwanie konkursowe polega na predykcji wskaźnika bezrobocia na lata 2022-2023, na podstawie danych z 2000-2021. Analizę będziemy przeprowadzać przy użyciu języka R w programie RStudio, do obliczeń i przewidywań użyjemy m.in. z bibliotek takich jak *forecast*, *prophet*, *WSTAW POTEM*, do wizualizacji - *ggplot2*, a do utworzenia ostatecznego raportu posłużymy się oprogramowaniem *RMarkdown*.

Wejściowe dane przyjmują formę szeregu czasowego - realizacji *procesu stochastycznego*, którego dziedziną jest czas - w tym przypadku po 12 miesięcy z 22 lat. Procesem stochastycznym $(X_t)_{t \in T}$ nazywamy rodzinę zmiennych losowych z pewnej przestrzeni probabilistycznej, przyjmującą wartości z przestrzeni mierzalnej.
  
Dane wskaźnika bezrobocia w latach 2000-2021 przedstawiają się w następujący sposób:

```{r, echo=FALSE, message=FALSE, warning=FALSE}
library(ggplot2)
library(plotly)
library(gapminder)
library(dplyr)
library(ggfortify)

df <- read.csv('BICCtemp.txt', sep = ';', dec = ",")
df$full_date <- as.Date(paste(df$Rok, df$M.c, "01", sep = "-"))

df %>%
  ggplot(aes(x = full_date, y = Wskaznik, col = Rok)) +
  geom_line() +
  labs(x = 'Czas', y = 'Wskaznik') +
  scale_x_date()
```

Z podziałem na lata:

```{r, echo=FALSE, message=FALSE, warning=FALSE}
ggplotly(
  df %>%
    ggplot(aes(x = M.c, y = Wskaznik, color = Rok)) +
    geom_line() +
    facet_wrap(~ Rok) +
    theme_light() +
    theme(legend.position = 'none', axis.text.x = element_blank(), axis.ticks.x = element_blank()) +
    labs(x = 'Miesiąc', y = 'Wskaźnik') +
    ylim(93,108)
  )
```

Od razu zauważamy, że dane podlegają dostrzegalnemu, nieliniowemu trendowi - wartość wskaźnika spada na początku roku, w okolicy połowy roku wzrasta, by potem delikatnie spadać, lub utrzymywać się aż do października, a na koniec roku znowu wzrasta. Występuje oczywiście sezonowość o okresie 12 miesięcy

Widać tutaj pewną anomalię w roku 2020 - wskaźnik bezrobocia wyraźnie wzrósł w kwietniu w wyniku wybuchu pandemii COVID-19. Problem ten można rozwiązać na kilka sposobów - DOPISAC POZNIEJ.

By sprawdzić podejrzenia wynikające z wizualnej obserwacji powyższych wykresów, przeprowadzamy dekompozycję STL. Ma ona wskazać składniki szeregu czasowego - jego trend, sezonowość oraz reszty.

```{r, message=FALSE}
library(forecast)

ts_stl <- ts(df$Wskaznik, frequency = 12, start = c(2000,12))
autoplot(mstl(ts_stl),col=ts_stl)
```

Powyższa metoda opiera się na przedstawieniu punktów szeregu czasowego ($y_i, i \in T$) jako suma komponentów sezonowości $s_i$, trendu $t_i$ i reszty $r_i$:
$$y_i = s_i + t_i + r_i$$
oraz estymacja owych komponentów. (**CITATION NEEDED**)

### 2. Opis metod prognozowania